Running one project: unit
2026-01-16 00:08:52 [[31merror[39m] 	[31mError:[39m
2026-01-16 00:08:52 [[31merror[39m] 	[31mError:[39m
2026-01-16 00:08:52 [[31merror[39m] 	[31mError:[39m
2026-01-16 00:08:52 [[31merror[39m] 	[31mError:[39m
2026-01-16 00:08:52 [[31merror[39m] 	[31mError:[39m
2026-01-16 00:08:52 [[31merror[39m] 	[31mError:[39m
2026-01-16 00:08:52 [[31merror[39m] 	[31mError:[39m
2026-01-16 00:08:52 [[31merror[39m] 	[31mError:[39m
2026-01-16 00:08:52 [[36minfo[39m] 	[36m1 fichier(s) upload√©(s) avec succ√®s[39m
2026-01-16 00:08:52 [[36minfo[39m] 	[36mFichier supprim√©: test.pdf[39m
2026-01-16 00:08:52 [[31merror[39m] 	[31mErreur getAllChantiers[39m {"error":{"message":"Database error","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\chantierController.test.ts:84:70)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:52 [[31merror[39m] 	[31mErreur getChantierById[39m {"error":{"message":"Database error","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\chantierController.test.ts:139:75)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:52 [[31merror[39m] 	[31mErreur createChantier[39m {"error":{"message":"Database error","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\chantierController.test.ts:225:75)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:52 [[31merror[39m] 	[31mErreur updateChantier[39m {"error":{"message":"Database error","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\chantierController.test.ts:302:75)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:52 [[31merror[39m] 	[31mErreur deleteChantier[39m {"error":{"message":"Database error","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\chantierController.test.ts:348:75)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:52 [[31merror[39m] 	[31mErreur getChantierStats[39m {"error":{"message":"Database error","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\chantierController.test.ts:424:17)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:52 [[31merror[39m] 	[31mErreur getAllMonteurs[39m {"error":{"message":"Database error","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\monteurController.test.ts:84:69)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:52 [[31merror[39m] 	[31mErreur getMonteurById[39m {"error":{"message":"Database error","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\monteurController.test.ts:140:74)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:52 [[31merror[39m] 	[31mErreur createMonteur[39m {"error":{"message":"Database error","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\monteurController.test.ts:242:74)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:52 [[31merror[39m] 	[31mErreur updateMonteur[39m {"error":{"message":"Database error","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\monteurController.test.ts:317:74)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:52 [[31merror[39m] 	[31mErreur deleteMonteur[39m {"error":{"message":"Database error","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\monteurController.test.ts:363:74)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:52 [[31merror[39m] 	[31mErreur getMonteurStats[39m {"error":{"message":"Database error","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\monteurController.test.ts:437:17)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mService email configure et pret[39m
2026-01-16 00:08:53 [[33mwarn[39m] 	[33mSMTP configur√© mais invalide (probablement Gmail 535), bascule vers Ethereal...[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mImpossible de configurer Ethereal Email:[39m {"error":{"message":"nodemailer_1.default.createTestAccount is not a function","stack":"TypeError: nodemailer_1.default.createTestAccount is not a function\n    at useEthereal (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:20:42)\n    at verifyEmailConfig (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:60:14)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:63:22)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: Feuille soumise - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifySubmission (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:381:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:76:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: [Action requise] Nouvelle feuille a valider - Jean Dupont -> sup1@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a sup1@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifySubmission (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:389:7)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:76:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: [Action requise] Nouvelle feuille a valider - Jean Dupont -> sup2@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a sup2@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifySubmission (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:389:7)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:76:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: Feuille soumise - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifySubmission (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:381:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:100:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: Feuille soumise - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifySubmission (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:381:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:108:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: Feuille validee - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifyValidation (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:399:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:118:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: Feuille validee - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifyValidation (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:399:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:128:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: Feuille validee - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifyValidation (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:399:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:136:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: [Action requise] Feuille rejetee - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifyRejection (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:408:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:146:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: [Action requise] Feuille rejetee - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifyRejection (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:408:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:158:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: [Action requise] Feuille rejetee - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifyRejection (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:408:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:166:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: [Action requise] Feuille rejetee - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifyRejection (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:408:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:175:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: Feuille validee - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifyValidation (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:399:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:185:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: Feuille soumise - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifySubmission (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:381:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:193:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: Feuille soumise - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifySubmission (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:381:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:202:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: [Action requise] Nouvelle feuille a valider - Jean Dupont -> sup@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a sup@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifySubmission (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:389:7)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:202:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[36minfo[39m] 	[36mEmail envoye: Feuille validee - Renovation Batiment A - mardi 13 janvier 2026 -> jean.dupont@test.com[39m
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"transporter.get is not a function","stack":"TypeError: transporter.get is not a function\n    at sendEmail (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:365:39)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Object.notifyValidation (C:\\Users\\Dimitri\\claude\\server\\src\\services\\emailService.ts:399:5)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:211:7)","name":"TypeError"}}
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur envoi email a jean.dupont@test.com:[39m {"error":{"message":"SMTP error","stack":"Error: SMTP error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\emailService.test.ts:221:38)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur liste jobs:[39m {"error":{"message":"Service error","stack":"Error: Service error\n    at C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\cronController.test.ts:58:23\n    at C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-mock\\build\\index.js:397:39\n    at C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-mock\\build\\index.js:404:13\n    at mockConstructor (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at getAllJobs (C:\\Users\\Dimitri\\claude\\server\\src\\controllers\\cronController.ts:10:26)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\cronController.test.ts:61:29)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur toggle job:[39m {"error":{"message":"Service error","stack":"Error: Service error\n    at C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\cronController.test.ts:134:23\n    at C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-mock\\build\\index.js:397:39\n    at C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-mock\\build\\index.js:404:13\n    at mockConstructor (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at toggleJobStatus (C:\\Users\\Dimitri\\claude\\server\\src\\controllers\\cronController.ts:40:30)\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\cronController.test.ts:140:34)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:53 [[31merror[39m] 	[31mErreur ex√©cution job:[39m {"error":{"message":"Execution error","stack":"Error: Execution error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\controllers\\cronController.test.ts:177:63)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
2026-01-16 00:08:54 [[36minfo[39m] 	[36mNouvel administrateur cr√©√© : newadmin@test.com[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Job "Rappel feuilles brouillon" activ√©[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Job "Rappel feuilles en attente" d√©sactiv√©[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Job "Nettoyage fichiers orphelins" d√©sactiv√©[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Job "Nettoyage fichiers orphelins" activ√©[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Ex√©cution manuelle: Nettoyage refresh tokens expir√©s[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] 5 refresh token(s) expir√©(s) supprim√©(s)[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Ex√©cution manuelle: Rappel feuilles brouillon[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] 1 feuille(s) en brouillon trouv√©e(s)[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Rappel: Feuille feuille- - Jean Dupont[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Ex√©cution manuelle: Rappel feuilles en attente[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] 1 feuille(s) en attente - 1 superviseur(s) √† notifier[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Ex√©cution manuelle: Nettoyage fichiers orphelins[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] 1 fichier(s) orphelin(s) trouv√©(s)[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Fichier orphelin supprim√©: orphan.pdf[39m
2026-01-16 00:08:54 [[32msuccess[39m] 	[32m[CRON] 1 fichier(s) orphelin(s) supprim√©(s)[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Ex√©cution manuelle: Statistiques quotidiennes[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] === Statistiques du jour ===[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Feuilles cr√©√©es: 15[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON]   - VALIDE: 10[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON]   - BROUILLON: 5[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Heures valid√©es: 80h[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Nouveaux monteurs: 2[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Ex√©cution manuelle: Rapport hebdomadaire[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] === Rapport Hebdomadaire ===[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] P√©riode: 09/01/2026 - 16/01/2026[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Feuilles valid√©es: 50[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Feuilles rejet√©es: 50[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Heures totales: 400h[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Frais totaux: 1500.00 EUR[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Top 1 monteurs cette semaine[39m
2026-01-16 00:08:54 [[36minfo[39m] 	[36m[CRON] Ex√©cution manuelle: Nettoyage refresh tokens expir√©s[39m
2026-01-16 00:08:54 [[31merror[39m] 	[31m[CRON] Erreur ex√©cution manuelle Nettoyage refresh tokens expir√©s:[39m {"error":{"message":"Database error","stack":"Error: Database error\n    at Object.<anonymous> (C:\\Users\\Dimitri\\claude\\server\\src\\__tests__\\services\\cronService.test.ts:216:17)\n    at Promise.then.completed (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\Dimitri\\claude\\server\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","name":"Error"}}
